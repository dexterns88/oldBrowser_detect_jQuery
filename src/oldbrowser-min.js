(function(a){a.oldBrowser=function(d,c){var f,e={},h={},b=false,g=this;d.data("oldBrowser",this);this.init=function(i){e=a.extend({},a.oldBrowser.defaultOptions,i);this._getBrowser();this._checkIsOld();if(b==true){this._setupMessage()}if(e.debug){this._atachDebug()}if(e.closeBtn){this._createClose()}};this._createClose=function(){var i="<a href='javascript:;' class='closeBtn'>close</a>";var j=a(i).appendTo(f);if(a().on){j.on("click",function(k){k.preventDefault();f.remove()})}else{j.click(function(k){k.preventDefault();f.remove()})}};this._setupMessage=function(){var l,j=d.find(e.holder),k=e.text;if(e.browserLink){l=this._browserLink();if(l!=false){k=k+" "+l}}var i="<div class='messages error oldbrowser-message'>"+k+"</div>";if(e.attachMode=="prependTo"){f=a(i).prependTo(j.eq(0))}else{if(e.attachMode=="insertBefore"){f=a(i).insertBefore(j.eq(0))}}};this._browserLink=function(){var j=false,i={};i.defined=false;switch(h.type){case"mozilla":i.link="http://www.mozilla.org/en-US/firefox/new/";i.text="update mozila firefox";i.defined=true;break;case"safari":i.link="http://support.apple.com/downloads/#safari";i.text="update Safari";i.defined=true;break;case"chrome":i.link="https://www.google.com/intl/en/chrome/browser/";i.text="update Google Chrome";i.defined=true;break;case"msie":i.link="http://windows.microsoft.com/en-us/internet-explorer/download-ie";i.text="update Internet Explorer";i.defined=true;break;case"opera":i.link="http://www.opera.com/computer/";i.text="update Opera";i.defined=true;break;default:i.defined=false}if(i.defined){j="<a target='_blank' href='"+i.link+"'>"+i.text+"</a>"}return j};this._checkIsOld=function(){var i=e.version[h.type];if(h.version<=i){b=true}};this._getBrowser=function(){var i=a.browser;if(!!navigator.userAgent.match(/Trident\/7\./)){h.type="msie"}else{if(i.mozilla){h.type="mozilla"}else{if(i.webkit){var k=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var j=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);if(k){h.type="chrome"}else{if(j){h.type="safari"}}}else{if(i.opera){h.type="opera"}else{if(i.msie){h.type="msie"}}}}}h.version=i.version;h.version=parseInt(h.version)};this._atachDebug=function(){var j="position:fixed; top: 150px; left: 0px; background: black; padding: 10px; color: #fff; font-size: 13px;",i="<div style='"+j+"'><b>old browser plugin <br/> DEBUG: TRUE </b><hr style='margin: 2px 0 5px'><p> <b>Browser:</b> "+h.type+" <br/> <b>Version:</b> "+h.version+"</p></div>";a("body").append(i)};this.init(c)};a.oldBrowser.defaultOptions={attachMode:"prependTo",browserLink:true,closeBtn:false,debug:false,text:"Your browser version is not supported. Please update to the latest version of your browser.",version:{mozilla:20,opera:10,msie:8,safari:520,chrome:25},holder:"body"};a.fn.oldBrowser=function(b){return this.each(function(){(new a.oldBrowser(a(this),b))})}})(jQuery);