/*
 * The MIT License (MIT)
 * Old browser detect plugin
 * By dejan dudukovic
 * Email: dexterns88@gmail.com
 * Version: 1.1.1
 * */
(function(e){e.oldBrowser=function(t,n){var r,i={},s={},o=false,u=this;t.data("oldBrowser",this);this.init=function(t){i=e.extend({},e.oldBrowser.defaultOptions,t);this._getBrowser();this._checkIsOld();if(o==true){this._setupMessage()}if(i.debug){this._atachDebug()}if(i.closeBtn){this._createClose()}};this._createClose=function(){var t="<a href='javascript:;' class='closeBtn'>close</a>";var n=e(t).appendTo(r);if(e().on){n.on("click",function(e){e.preventDefault();r.remove()})}else{n.click(function(e){e.preventDefault();r.remove()})}};this._setupMessage=function(){var n,s=t.find(i.holder),o=i.text;if(i.browserLink){n=this._browserLink();if(n!=false){o=o+" "+n}}var u="<div class='messages error oldbrowser-message'>"+o+"</div>";if(i.attachMode=="prependTo"){r=e(u).prependTo(s.eq(0))}else if(i.attachMode=="insertBefore"){r=e(u).insertBefore(s.eq(0))}};this._browserLink=function(){var e=false,t={};t.defined=false;switch(s.type){case"mozilla":t.link="http://www.mozilla.org/en-US/firefox/new/";t.text="update mozila firefox";t.defined=true;break;case"safari":t.link="http://support.apple.com/downloads/#safari";t.text="update Safari";t.defined=true;break;case"chrome":t.link="https://www.google.com/intl/en/chrome/browser/";t.text="update Google Chrome";t.defined=true;break;case"msie":t.link="http://windows.microsoft.com/en-us/internet-explorer/download-ie";t.text="update Internet Explorer";t.defined=true;break;case"opera":t.link="http://www.opera.com/computer/";t.text="update Opera";t.defined=true;break;default:t.defined=false}if(t.defined){e="<a target='_blank' href='"+t.link+"'>"+t.text+"</a>"}return e};this._checkIsOld=function(){var e=i.version[s.type];if(s.version<=e){o=true}};this._getBrowser=function(){var t=e.browser;if(!!navigator.userAgent.match(/Trident\/7\./)){s.type="msie"}else if(t.mozilla){s.type="mozilla"}else if(t.webkit){var n=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var r=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);if(n){s.type="chrome"}else if(r){s.type="safari"}}else if(t.opera){s.type="opera"}else if(t.msie){s.type="msie"}s.version=t.version;s.version=parseInt(s.version)};this._atachDebug=function(){var t="position:fixed; top: 150px; left: 0px; background: black; padding: 10px; color: #fff; font-size: 13px;",n="<div style='"+t+"'><b>old browser plugin <br/> DEBUG: TRUE </b><hr style='margin: 2px 0 5px'><p> <b>Browser:</b> "+s.type+" <br/> <b>Version:</b> "+s.version+"</p></div>";e("body").append(n)};this.init(n)};e.oldBrowser.defaultOptions={attachMode:"prependTo",browserLink:true,closeBtn:false,debug:false,text:"Your browser version is not supported. Please update to the latest version of your browser.",version:{mozilla:20,opera:10,msie:8,safari:520,chrome:25},holder:"body"};e.fn.oldBrowser=function(t){return this.each(function(){new e.oldBrowser(e(this),t)})}})(jQuery)